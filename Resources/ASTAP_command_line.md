# ASTAP Astrometric Solver Command Line

The FOV, RA, DEC parameters are intended for non-FITS files. They are not required for FITS files having the values in the header.

| Command   | Parameter              | Unit        | Remarks                                                                                                                                                                                                 |
|-----------|------------------------|-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| -h        |                        |             | help info                                                                                                                                                                                               |
| -help     |                        |             | help info                                                                                                                                                                                               |
| **Solver options:** |                |             |                                                                                                                                                                                                        |
| -f        | file_name              |             | Image file to solve astrometric. Valid formats: FITS, TIFF, PNG, JPG, uncompressed XISF files.                                                                                                          |
| -r        | radius_search_field    | degrees     | The radius of the square search pattern around the start position. *                                                                                                                                    |
| -fov      | field_height_of_image  | degrees     | If not specified it will be extracted from the FITS header or last successful solve will be used (learn mode). Specify 0 for auto. *                                                                    |
| -ra       | right_ascension        | hours       | If not specified it will be extracted from the FITS header or last successful solve will be used (learn mode). *                                                                                        |
| -spd      | south_pole_distance (dec+90) | degrees | Declination is given in south pole distance so always positive. If not specified it will be extracted from the FITS header or last successful solve will be used (learn mode). *                        |
| -z        | down_sample_factor     | 0,1,2,3,4…  | Down sample (binning) of the input image prior to solving. Specify "0" for auto selection. *                                                                                                            |
| -s        | max_number_of_stars    |             | Limits the number of stars used for the solution. Typical value 500. *                                                                                                                                  |
| -t        | quad_tolerance         | ‰           | Tolerance used to compare quads. Typical value 0.007. *                                                                                                                                                 |
| -m        | minimum star size      | arcsec      | This setting could be used to filter out hot pixels.                                                                                                                                                    |
| -check    | apply                  | y/n         | Apply a check pattern filter prior to solving. Use for raw OSC images only when binning is set 1x1. *                                                                                                   |
| -d        | path                   |             | Specify a path to the star database                                                                                                                                                                     |
| -D        | abbreviation           | d80/d50/... | Specify a star database                                                                                                                                                                                 |
| -o        | file                   |             | Name the output files with this base path & file name                                                                                                                                                   |
| -sip      | add                    | y/n         | Add SIP (Simple Image Polynomial) coefficients. Only required to deactivate SIP.                                                                                                                        |
| -speed    | mode                   | slow/auto   | "slow" forces more area overlap while searching to improve detection. *                                                                                                                                 |
| -wcs      |                        |             | Write a .wcs file in similar format as Astrometry.net. Line length fixed at 80 bytes and no carriage returns. Else text style                                                                           |
| -update   |                        |             | Add the solution to the input FITS/TIFF file header. For JPEG/PNG, a new FITS will be created.                                                                                                          |
| -log      |                        |             | Write solver log to a .log text file.                                                                                                                                                                   |
| **Analyse options:** |              |             |                                                                                                                                                                                                        |
| -analyse  | snr_minimum            |             | Analyse only and report HFD. Windows: errorlevel = median HFD * 100M + number of stars used. HFD = trunc(errorlevel/1M)/100. Linux/macOS: info sent to stdout only.                                     |
| -extract  | snr_minimum            |             | As analyse option but additionally export info of all detectable stars to a .csv file. Decimal separator is always a dot.                                                                               |
| -extract2 | snr_minimum            |             | Solve image and export info of all detectable stars to a .csv file including α, δ of each detection. SIP polynomial used for high precision positions. Decimal separator is always a dot.                |
| **Extra options (GUI only):** |     |             | Not for ASTAP_CLI command-line version.                                                                                                                                                                 |
| -annotate |                        |             | Produce a deep sky annotated JPEG file with same name as input file extended with `_annotated`.                                                                                                         |
| -debug    |                        |             | Show GUI and stop prior to solving                                                                                                                                                                      |
| -tofits   | binning                | 1,2,3,4     | Produce binned FITS file from input PNG/JPG                                                                                                                                                             |
| **As analyser/stacker:** |          |             |                                                                                                                                                                                                        |
| -sqm      | pedestal               |             | Measure sky background value in magn/arcsec² relative to stars. Pedestal = mean value of a dark. Also centalt and airmass written to header.                                                            |
| -focus1 file1.fits -focus2 file2.fits -focus3 file3.fits … | | | Find best focus point for ≥4 images using curve fitting. Windows: errorlevel = focuspos*1E4 + rem.error*1E3. Linux: see stdout.                                                                       |
| -stack    |                        |             | Start ASTAP with live stack tab visible and path selected.                                                                                                                                              |